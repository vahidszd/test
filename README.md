# FBCM(Fast Beam Conditions Monitor) Simulation With CMSSW
Full CMSSW simulations, including an appropriate model for the front-end electronics, were performed to assess the performance of the proposed system and to optimize some of its parameters. The simulations were implemented in a private branch of CMSSW 11 2 0 pre10, including the FBCM geometry, detector simulation using GEANT4, and a customized digitizer. The results at the GEANT4 level show a good linearity; however, the digitization step describing the front-end electronics creates nonlinear effects in the simulations.
## In order to use this simulation, we need to follow the following steps:
* Setup workspace for FBCM simulation in CMSSW_11_2_X
  * Create your CMS_11_2_X
   ```sh
   cd <YourWorkDir>
   cmsrel CMSSW_11_2_0_pre10
   cd CMSSW_11_2_0_pre10/src
   cmsenv
   cd ..
   ```
   *    after setting scram environment variables, please go to release base directory. Copy the [setup          file](https://github.com/m-sedghi/cmssw/blob/CMSSW_11_2_FbcmBcm1f/SimFbcm) to the  CMSSW_11_2_0_pre10 directory and type 
         ```sh
         ./Setup_Fbcm_CMSSW_11_2_X.sh
        ```
   
- Generating Minibias events with pythia
   * Go to the  directory where Minibias generating configuration file located
     ```sh
     cd <YourWorkDir>/CMSSW_11_2_0_pre10/src/SimFbcm/SampleConfigs/Fbcm2022Aug
     ls
     ```
      then you can find **MinBias_14TeV_pythia8_TuneCUETP8M1_cfg.py** Python script which generated by 
       ```sh
        cmsDriver.py --evt_type MinBias_14TeV_pythia8_TuneCUETP8M1_cfi -s GEN,SIM --mc --fileout file:MinBias_14TeV_pythia8_TuneCUETP8M1_GEN_SIM.root --conditions auto:phase2_realistic --era Phase2  --datatier GEN-SIM --geometry Extended2026D81 --eventcontent FEVTDEBUG --pileup=NoPileUp --python_filename MinBias_14TeV_pythia8_TuneCUETP8M1_cfg.py --customise Configuration/DataProcessing/Utils.addMonit oring --nThreads 8 -n 40 --no_exe
        ```
       command. Now you can generate your own configuration file with other options than used in abow. For example change the  `--python_filename MinBias_14TeV_pythia8_TuneCUETP8M1_cfg.py` to `--python_filename New_MinBias_14TeV_pythia8_TuneCUETP8M1_cfg.py` to generate another configuration file named **New_MinBias_14TeV_pythia8_TuneCUETP8M1_cfg.py**.
    * It's  type 
      ```sh
      cmsRun  MinBias_14TeV_pythia8_TuneCUETP8M1_cfg.py
      ```
      to generate MinBias events. It take few min for the script to do it's job (please be patient). When the script done it's job successfully, you should find a root file in the same directory named **MinBias_14TeV_pythia8_TuneCUETP8M1_GEN_SIM.root** where the generated MiniBias events stored.
     
      
- Simulation of bunches with different pileupes by mixing the Minibias events generated in first step
- 
